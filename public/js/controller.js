// Generated by CoffeeScript 1.4.0
(function() {
  var socket,
    _this = this;

  socket = io.connect('http://localhost:3000/');

  $(function() {
    var $container, $win, ioEmit, pos;
    $container = $('#container');
    $win = $(window);
    pos = {
      startX: 0,
      startY: 0,
      endX: 0,
      endY: 0
    };
    $container.width($win.width()).height($win.height()).on('touchstart mousedown', function(e) {
      e.preventDefault();
      if (e.type === 'mousedown') {
        pos.startX = e.pageX;
        return pos.startY = e.pageY;
      } else if (e.type === 'touchstart') {
        pos.startX = event.changedTouches[0].pageX;
        return pos.startY = event.changedTouches[0].pageY;
      }
    }).on('touchmove', function(e) {
      pos.endX = event.changedTouches[0].pageX;
      return pos.endY = event.changedTouches[0].pageY;
    }).on('touchend mouseup', function(e) {
      if (e.type === 'mouseup') {
        pos.endX = e.pageX;
        pos.endY = e.pageY;
      }
      return ioEmit();
    });
    ioEmit = function() {
      var direction, x, y, _x, _y;
      _x = pos.endX - pos.startX;
      _y = pos.endY - pos.startY;
      x = Math.abs(_x);
      y = Math.abs(_y);
      direction = '';
      if (x > y) {
        if (_x < 0) {
          direction = 'right';
        } else {
          direction = 'left';
        }
      } else {
        if (_y < 0) {
          direction = 'down';
        } else {
          direction = 'up';
        }
      }
      return socket.emit('direction', {
        direction: direction
      });
    };
    return _this;
  });

}).call(this);
